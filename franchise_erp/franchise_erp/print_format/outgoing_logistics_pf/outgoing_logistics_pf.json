{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-12-22 11:16:51.073938",
 "css": ".barcodestyle > svg{\n        height: 50%;\n    width: 75%;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Outgoing Logistics",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- 1. Fetch Company & Dynamic Party Logic -->\n{% set comp_name = doc.owner_site %}\n{% if comp_name %}\n    {% set company_logo = frappe.db.get_value(\"Company\", comp_name, \"logo_for_printing\") or frappe.db.get_value(\"Company\", comp_name, \"company_logo\") %}\n    {% set company_address = frappe.db.get_value(\"Address\", {\"address_title\": comp_name}, \"*\", as_dict=1) %}\n{% endif %}\n\n<!-- Dynamic Transporter & Consignee Names -->\n{% set trans_name = doc.transporter or doc.s_transporter %}\n{% set cons_name = doc.consignee or doc.consignee_supplier %}\n\n<!-- Address Fetching -->\n{% set trans_addr_name = frappe.db.get_value(\"Dynamic Link\", {\"link_name\": trans_name, \"parenttype\": \"Address\"}, \"parent\") if trans_name else None %}\n{% set trans_addr = frappe.db.get_value(\"Address\", trans_addr_name, \"*\", as_dict=1) if trans_addr_name else None %}\n\n{% set cons_addr_name = frappe.db.get_value(\"Dynamic Link\", {\"link_name\": cons_name, \"parenttype\": \"Address\"}, \"parent\") if cons_name else None %}\n{% set cons_addr = frappe.db.get_value(\"Address\", cons_addr_name, \"*\", as_dict=1) if cons_addr_name else None %}\n\n<!-- Logic: Get Consignee Address Fields (Line 1 & City) -->\n{% set c_line1 = \"\" %}\n{% set c_city = \"\" %}\n\n{% if doc.references and doc.references[0].source_doctype == \"Sales Invoice\" %}\n    {% set inv = frappe.db.get_value(\"Sales Invoice\", doc.references[0].source_name, [\"shipping_address_name\", \"customer_address\"], as_dict=1) %}\n    {% set addr_id = inv.shipping_address_name or inv.customer_address %}\n    {% if addr_id %}\n        {% set addr_rec = frappe.db.get_value(\"Address\", addr_id, [\"address_line1\", \"city\"], as_dict=1) %}\n        {% set c_line1 = addr_rec.address_line1 %}\n        {% set c_city = addr_rec.city %}\n    {% endif %}\n{% endif %}\n\n{# Fallback: Agar invoice nahi hai toh party address use karein #}\n{% if not c_line1 and cons_addr %}\n    {% set c_line1 = cons_addr.address_line1 %}\n    {% set c_city = cons_addr.city %}\n{% endif %}\n\n<!-- Total Qty Accumulator Logic -->\n{% set total_qty_list = [0] %}\n{% if doc.references %}\n    {% for row in doc.references %}\n        {% set field = \"total_qty\" if row.source_doctype == \"Sales Invoice\" else \"qty\" %}\n        {% set q = frappe.db.get_value(row.source_doctype, row.source_name, field) or 0 %}\n        {% if total_qty_list.append(total_qty_list.pop() + q) %}{% endif %}\n    {% endfor %}\n{% endif %}\n{% set total_tagged_qty = total_qty_list[0] %}\n<!-- JS Barcode Library -->\n<script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js\"></script>\n\n<style>\n@page {\n    size: A5 landscape;\n    margin: 1mm; \n}\n.no-break {\n    page-break-inside: avoid;\n    break-inside: avoid;\n}\nhtml, body { \n    margin: 0; padding: 0; \n    font-family: Arial, sans-serif; \n    font-size: 8pt; \n    line-height: 1.05; \n    color: #000;\n}\ntable { width: 100%; border-collapse: collapse; table-layout: fixed; }\ntd, th { padding: 1px 3px; vertical-align: top; overflow: hidden; }\n.bold { font-weight: bold; }\n.uppercase { text-transform: uppercase; }\n.header-title { font-size: 16pt; font-weight: bold;  }\n.company-name { font-size: 13pt; font-weight: bold; }\n/* Reduced font size and forced no-wrap for Logistic No */\n.logistic-id { font-size: 11.5pt; font-weight: bold; white-space: nowrap; } \n.border-top-thick { border-top: 1.5px solid #000; }\n.border-bottom-thick { border-bottom: 1.5px solid #000; }\n.border-bottom { border-bottom: 1px solid #000; }\n.no-break { page-break-inside: avoid; }\n</style>\n\n<div class=\"no-break\" style=\"width: 100%;\">\n    <!-- 1. HEADER SECTION -->\n    <table width=\"100%\">\n        <tr>\n            <td width=\"25%\">\n                {% if company_logo %}\n                    <img src=\"{{ company_logo }}\" style=\"max-height: 75px; width: auto;\">\n                {% endif %}\n            </td>\n            <td width=\"55%\" align=\"center\">\n                <span class=\"header-title\">Outgoing Logistics</span><br>\n                <br>\n                <span class=\"company-name\">{{ comp_name or \"\" }}</span><br>\n                <span style=\"font-size: 7.5pt;\">\n                    {% if company_address %}\n                        {{ company_address.address_line1 or \"\" }}, {{ company_address.city or \"\" }} - {{ company_address.pincode or \"\" }}\n                    {% endif %}\n                </span>\n            </td>\n            <td width=\"20%\">&nbsp;</td>\n        </tr>\n    </table>\n\n    <!-- 2. TRANSPORTER & CONSIGNEE -->\n    <table style=\"margin-top: 2px;\">\n    <tr>\n        <!-- Left Side: Transporter -->\n        <td width=\"50%\" style=\"padding-right: 5px;\">\n            <table width=\"100%\">\n                <tr>\n                    <td width=\"30%\">Transporter:</td>\n                    <td class=\"bold uppercase\">{{ trans_name or \"\" }}</td>\n                </tr>\n                <tr>\n                    <td>Address:</td>\n                    <td>{% if trans_addr %}{{ trans_addr.address_line1 or \"\" }}, {{ trans_addr.city or \"\" }}{% endif %}</td>\n                </tr>\n                <tr>\n                    <td>GSTIN:</td>\n                    <td class=\"bold\">\n                        {% if trans_addr and trans_addr.gstin %}\n                            {{ trans_addr.gstin }}\n                        {% else %}\n                            Unregistered\n                        {% endif %}\n                    </td>\n                </tr>\n                <tr>\n                    <td>GST State:</td>\n                    <td>{{ trans_addr.state or \"\" }}</td>\n                </tr>\n            </table>\n        </td>\n\n        <!-- Right Side: Consignee -->\n        <td width=\"50%\" style=\"padding-left: 5px; border-left: 1px solid #eee;\">\n            <table width=\"100%\">\n                <tr>\n                    <td width=\"30%\">Consignee:</td>\n                    <td class=\"bold uppercase\">{{ cons_name or \"\" }}</td>\n                </tr>\n                <tr>\n                    <td>Address:</td>\n                    <td>{% if c_line1 %}{{ c_line1 or \"\" }}{% if c_city %}, {{ c_city or \"\" }}{% endif %}{% endif %}</td>\n                </tr>\n                <tr>\n                    <td>GSTIN:</td>\n                    <td class=\"bold\">{{ cons_addr.gstin or \"\" }}</td>\n                </tr>\n                <tr>\n                    <td>GST State:</td>\n                    <td>{{ cons_addr.state or \"\" }}</td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n</table>\n\n    <!-- 3. STATION ROW -->\n    <table style=\"margin-top: 1px;  padding-top: 1px;\">\n        <tr>\n            <td width=\"15%\">Station From:</td>\n            <td width=\"30%\" class=\"bold uppercase\">{{ doc.station_from or \"\" }}</td>\n            <td width=\"19%\">Station To:</td>\n            <td width=\"25%\" class=\"bold uppercase\">{{ doc.station_to or \"\" }}</td>\n            <!--<td align=\"right\" width=\"10%\">Dist:</td>-->\n            <!--<td width=\"5%\" class=\"bold\">{{ doc.distancein_km or \"\" }}</td>-->\n        </tr>\n    </table>\n\n    <!-- 4. LOGISTIC NO STRIP -->\n    <table class=\"border-top-thick\" style=\"margin-top: 1px;\">\n        <tr>\n            <!-- Adjusted width to give Logistic No more space -->\n            <td width=\"42%\" style=\"vertical-align: middle;\"> \n                Logistic No.: <span class=\"logistic-id\">{{ doc.name }}</span>\n            </td>\n            <td width=\"33%\" style=\"vertical-align: middle; text-align: center;\">\n                Logistic Date: <b>{{ doc.get_formatted(\"date\") }}</b> &nbsp;&nbsp;\n                Logistic Qty: <b>{{ doc.quantity }}</b>\n            </td>\n            <td width=\"25%\" align=\"right\" style=\"vertical-align: middle;\">\n                {% if doc.item_barcode %}\n    <span class=\"bold barcodestyle\">{{ doc.item_barcode }}</span>\n{% elif doc.entry_no %}\n    <img alt=\"{{ doc.entry_no }}\"\n         src=\"/api/method/frappe.utils.print_format.report_to_pdf?html=%3Csvg%20class%3D%22barcode%22%20jsbarcode-format%3D%22code128%22%20jsbarcode-value%3D%22{{ doc.entry_no }}%22%20jsbarcode-height%3D%2240%22%3E%3C%2Fsvg%3E\"\n         style=\"width:150px;height:40px;\">\n{% endif %}\n                <!--<div style=\"font-size: 6.5pt; text-align: center; margin-right: 15px;\">Scan Box Barcode</div>-->\n                <!--<svg id=\"barcode\" style=\"max-height: 30px; width: 125px;\"></svg>-->\n                <!--<script>JsBarcode(\"#barcode\", \"{{ doc.name }}\", { format: \"CODE128\", height: 30, displayValue: false, margin: 0 });</script>-->\n            </td>\n        </tr>\n    </table>\n\n    <!-- 5. DOCUMENT DETAILS -->\n    <table width=\"100%\" style=\"margin-top: 1px;\">\n        <tr>\n            <td width=\"15%\">Document No.:</td>\n            <td width=\"20%\">{{ doc.document_no or \"\" }}</td>\n            <td width=\"15%\">Document Date:</td>\n            <td width=\"15%\">{{ doc.get_formatted(\"date\") }}</td>\n\n            <td width=\"35%\" rowspan=\"2\" style=\"text-align: right;\">\n                <div style=\"text-align: left; padding-left: 20px;\">\n                    <span style=\"font-size: 7.5pt;\">Declaration Amt.:</span><br>\n                    <span style=\"font-size: 12pt;\" class=\"bold\">{{ doc.get_formatted(\"declaration_amount\") or \"0.00\" }}</span>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>Mode of Transport:</td>\n            <td>{{ doc.mode or \"Land\" }}</td>\n            <td>To Pay:</td>\n            <td>{{ doc.to_pay or \"Yes\" }}</td>\n        </tr>\n    </table>\n\n    <!-- 6. CHARGES TABLE -->\n    <table class=\"border-top-thick border-bottom-thick\" style=\"margin-top: 3px;\">\n        <thead>\n            <tr class=\"bold\">\n                <td style=\"text-align: left;\">Actual Weight</td>\n                <td style=\"text-align: left;\">Charged Weight</td>\n                <td style=\"text-align: left;\">Rate</td>\n                <td style=\"text-align: left;\">Freight</td>\n                <td style=\"text-align: left;\">Others</td>\n                <td style=\"text-align: left;\">Total Amount</td>\n                <td style=\"text-align: right;\">Total Inv. Qty</td>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td style=\"text-align: left;\">{{ doc.actual_weight or \"0\" }}</td>\n                <td style=\"text-align: left;\">{{ doc.charged_weight or \"0\" }}</td>\n                <td style=\"text-align: left;\">{{ doc.rate or \"0\" }}</td>\n                <td style=\"text-align: left;\">{{ doc.freight_charges or \"0\" }}</td>\n                <td style=\"text-align: left;\">{{ doc.additional_charges or \"0\" }}</td>\n                <td style=\"text-align: left;\" class=\"bold\">{{ doc.get_formatted(\"total_amount\") }}</td>\n                <!--<td style=\"text-align: right; font-size: 11pt;\" class=\"bold\">{{ doc.quantity }}</td>-->\n                <td class=\"text-right bold\" style=\"font-size: 13pt; vertical-align: middle;\">\n                    {{ total_tagged_qty | int }}\n                </td>\n                                \n            </tr>\n        </tbody>\n    </table>\n\n    <!-- 7. REMARKS -->\n    <table style=\"margin-top: 1px;border-bottom: 1px solid #000;\">\n        <tr>\n            <td class=\"bold\" style=\"width:105px;\">Logistics Remarks:</td>\n            <td >{{ doc.remarks or \"No Remark\" }}</td>\n        </tr>\n    </table>\n\n    <!-- 8. CHILD TABLE (FIXED ALIGNMENT) -->\n    <table class=\"border-bottom\" style=\"margin-top: 2px;\">\n        <thead>\n            <tr style=\"border-bottom: 1px solid #000;\">\n                <th style=\"text-align: left; width: 40%;\">Entry No.</th>\n                <th style=\"text-align: left; width: 40%;\">Entry Date</th>\n                <!--<th style=\"text-align: right; width: 20%;\">Inv. Qty.</th>-->\n                <th style=\"width:20%; text-align:center;\">Inv. Qty.</th>\n\n            </tr>\n        </thead>\n        <tbody>\n            {% if doc.references %}\n                {% for row in doc.references %}\n                {% set inv_qty = frappe.db.get_value(\"Sales Invoice\", row.source_name, \"total_qty\") or 0 %}\n                <tr>\n                    <td style=\"text-align: left;\" class=\"bold\">{{ row.source_name or \"\" }}</td>\n                    <td style=\"text-align: left;\">{{ doc.get_formatted(\"date\") }}</td>\n                    <td class=\"bold\" style=\"width:20%; text-align:center; vertical-align:middle;\">\n                        {{ inv_qty | int }}\n                    </td>\n                </tr>\n                {% endfor %}\n            {% else %}\n                <tr><td colspan=\"3\" style=\"text-align: center;\">No Entries Linked</td></tr>\n            {% endif %}\n        </tbody>\n    </table>\n\n    <!-- 9. FOOTER -->\n    <table style=\"margin-top: 6px;\">\n        <tr>\n            <!-- VALUE ROW -->\n            <td width=\"33%\" align=\"center\">\n                <div class=\"bold\" ;\">\n                    {{ frappe.db.get_value(\"User\", doc.owner, \"full_name\") or doc.owner }}\n                </div>\n            </td>\n        \n            <td width=\"34%\" align=\"center\">\n                <div \"></div>\n            </td>\n        \n            <td width=\"33%\" align=\"center\">\n                <div \"></div>\n            </td>\n        </tr>\n        \n        <tr>\n            <!-- UNDERLINE ROW -->\n            <td align=\"center\">\n                <div style=\"border-bottom:1px solid #000; width:70%; margin:auto;\"></div>\n            </td>\n        \n            <td align=\"center\">\n                <div style=\"border-bottom:1px solid #000; width:70%; margin:auto;\"></div>\n            </td>\n        \n            <td align=\"center\">\n                <div style=\"border-bottom:1px solid #000; width:70%; margin:auto;\"></div>\n            </td>\n        </tr>\n        \n        <tr>\n            <!-- LABEL ROW -->\n            <td align=\"center\" style=\"padding-top:4px;\">Created By</td>\n            <td align=\"center\" style=\"padding-top:4px;\">Checked By</td>\n            <td align=\"center\" style=\"padding-top:4px;\">Passed By</td>\n        </tr>\n    </table>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-02-24 15:08:13.093125",
 "modified_by": "Administrator",
 "module": "Franchise Erp",
 "name": "Outgoing Logistics PF",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}