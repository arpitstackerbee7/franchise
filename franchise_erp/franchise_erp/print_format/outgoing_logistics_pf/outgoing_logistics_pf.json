{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-12-22 11:16:51.073938",
 "css": ".barcodestyle > svg{\n        height: 50%;\n    width: 75%;\n}\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Outgoing Logistics",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- 1. Fetch Company & Dynamic Party Logic -->\n{% set comp_name = doc.owner_site %}\n{% if comp_name %}\n    {% set company_logo = frappe.db.get_value(\"Company\", comp_name, \"logo_for_printing\") or frappe.db.get_value(\"Company\", comp_name, \"company_logo\") %}\n    {% set company_address = frappe.db.get_value(\"Address\", {\"address_title\": comp_name}, \"*\", as_dict=1) %}\n{% endif %}\n\n<!-- Dynamic Transporter & Consignee Names -->\n{% set trans_name = doc.transporter or doc.s_transporter %}\n{% set cons_name = doc.consignee or doc.consignee_supplier %}\n\n<!-- Address Fetching for Transporter -->\n{% set trans_addr_name = frappe.db.get_value(\"Dynamic Link\", {\"link_name\": trans_name, \"parenttype\": \"Address\"}, \"parent\") if trans_name else None %}\n{% set trans_addr = frappe.db.get_value(\"Address\", trans_addr_name, \"*\", as_dict=1) if trans_addr_name else None %}\n\n<!-- LOGIC: Get Consignee Address Details STRICTLY from Transaction Document -->\n{% set c_line1 = \"\" %}\n{% set c_line2 = \"\" %}\n{% set c_city = \"\" %}\n{% set c_pincode = \"\" %}\n{% set c_gstin = \"\" %}\n{% set c_state = \"\" %}\n\n{% if doc.references %}\n    {% set ref0 = doc.references[0] %}\n    {% set addr_id = None %}\n    \n    {% if ref0.source_doctype == \"Sales Invoice\" %}\n        {% set inv = frappe.db.get_value(\"Sales Invoice\", ref0.source_name, [\"shipping_address_name\", \"customer_address\"], as_dict=1) %}\n        {% set addr_id = inv.shipping_address_name or inv.customer_address %}\n    {% elif ref0.source_doctype == \"Purchase Receipt\" %}\n        {% set addr_id = frappe.db.get_value(\"Purchase Receipt\", ref0.source_name, \"supplier_address\") %}\n    {% elif ref0.source_doctype == \"Subcontracting Order\" %}\n        {% set addr_id = frappe.db.get_value(\"Subcontracting Order\", ref0.source_name, \"supplier_address\") %}\n    {% endif %}\n\n    {% if addr_id %}\n        {% set addr_rec = frappe.db.get_value(\"Address\", addr_id, [\"address_line1\", \"address_line2\", \"city\", \"pincode\", \"gstin\", \"state\"], as_dict=1) %}\n        {% if addr_rec %}\n            {% set c_line1 = addr_rec.address_line1 %}\n            {% set c_line2 = addr_rec.address_line2 %}\n            {% set c_city = addr_rec.city %}\n            {% set c_pincode = addr_rec.pincode %}\n            {% set c_gstin = addr_rec.gstin %}\n            {% set c_state = addr_rec.state %}\n        {% endif %}\n    {% endif %}\n{% endif %}\n\n<!-- Total Qty Accumulator Logic -->\n{% set total_qty_list = [0] %}\n{% if doc.references %}\n    {% for row in doc.references %}\n        {% set q = frappe.db.get_value(row.source_doctype, row.source_name, \"total_qty\") or 0 %}\n        {% if total_qty_list.append(total_qty_list.pop() + q) %}{% endif %}\n    {% endfor %}\n{% endif %}\n{% set total_tagged_qty = total_qty_list[0] %}\n\n<!--<script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js\"></script>-->\n\n<style>\n@page { size: A5 landscape; margin: 1mm; }\n.no-break { page-break-inside: avoid; break-inside: avoid; }\nhtml, body { margin: 0; padding: 0; font-family: Arial, sans-serif; font-size: 8pt; line-height: 1.05; color: #000; }\ntable { width: 100%; border-collapse: collapse; table-layout: fixed; }\ntd, th { padding: 1px 3px; vertical-align: top; overflow: hidden; }\n.bold { font-weight: bold; }\n.uppercase { text-transform: uppercase; }\n.header-title { font-size: 16pt; font-weight: bold; }\n.company-name { font-size: 13pt; font-weight: bold; }\n.logistic-id { font-size: 11.5pt; font-weight: bold; white-space: nowrap; } \n.border-top-thick { border-top: 1.5px solid #000; }\n.border-bottom-thick { border-bottom: 1.5px solid #000; }\n.border-bottom { border-bottom: 1px solid #000; }\n</style>\n\n<div class=\"no-break\" style=\"width: 100%;\">\n    <!-- 1. HEADER SECTION -->\n    <table width=\"100%\">\n        <tr>\n            <td width=\"25%\">\n                {% if company_logo %}\n                    <img src=\"{{ company_logo }}\" style=\"max-height: 75px; width: auto;\">\n                {% endif %}\n            </td>\n            <td width=\"55%\" align=\"center\">\n                <span class=\"header-title\">Outgoing Logistics</span><br><br>\n                <span class=\"company-name\">{{ comp_name or \"\" }}</span><br>\n                <span style=\"font-size: 7.5pt;\">\n                    {% if company_address %}\n                        {{ company_address.address_line1 or \"\" }}, {{ company_address.city or \"\" }} - {{ company_address.pincode or \"\" }}\n                    {% endif %}\n                </span>\n            </td>\n            <td width=\"20%\">&nbsp;</td>\n        </tr>\n    </table>\n\n    <!-- 2. TRANSPORTER & CONSIGNEE -->\n    <table style=\"margin-top: 2px;\">\n        <tr>\n            <!-- Transporter Info -->\n            <td width=\"50%\" style=\"padding-right: 5px;\">\n                <table width=\"100%\">\n                    <tr><td width=\"30%\">Transporter:</td><td class=\"bold uppercase\">{{ trans_name or \"\" }}</td></tr>\n                    <tr><td>Address:</td><td>{% if trans_addr %}{{ trans_addr.address_line1 or \"\" }}, {{ trans_addr.city or \"\" }}{% endif %}</td></tr>\n                    <tr><td>GSTIN:</td><td class=\"bold\">{{ trans_addr.gstin if trans_addr and trans_addr.gstin else \"Unregistered\" }}</td></tr>\n                    <tr><td>GST State:</td><td>{{ trans_addr.state or \"\" }}</td></tr>\n                </table>\n            </td>\n            <!-- Consignee Info (Fixed to pull from Transaction) -->\n            <td width=\"50%\" style=\"padding-left: 5px; border-left: 1px solid #eee;\">\n                <table width=\"100%\">\n                    <tr><td width=\"30%\">Consignee:</td><td class=\"bold uppercase\">{{ cons_name or \"\" }}</td></tr>\n                    <tr>\n                        <td>Address:</td>\n                        <td>\n                            {% if c_line1 %}{{ c_line1 }}{% endif %}\n                            {% if c_line2 %}, {{ c_line2 }}{% endif %}\n                            {% if c_city %}, {{ c_city }}{% endif %}\n                            {% if c_pincode %} - {{ c_pincode }}{% endif %}\n                        </td>\n                    </tr>\n                    <tr><td>GSTIN:</td><td class=\"bold\">{{ c_gstin or \"\" }}</td></tr>\n                    <tr><td>GST State:</td><td>{{ c_state or \"\" }}</td></tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n\n    <!-- 3. STATION ROW -->\n    <table style=\"margin-top: 1px;\">\n        <tr>\n            <td width=\"15%\">Station From:</td><td width=\"30%\" class=\"bold uppercase\">{{ doc.station_from or \"\" }}</td>\n            <td width=\"19%\">Station To:</td><td width=\"25%\" class=\"bold uppercase\">{{ doc.station_to or \"\" }}</td>\n        </tr>\n    </table>\n\n    <!-- 4. LOGISTIC NO STRIP -->\n    <table class=\"border-top-thick\" style=\"margin-top: 1px;\">\n        <tr>\n            <td width=\"40%\" style=\"vertical-align: middle;\">Logistic No.: <span class=\"logistic-id\">{{ doc.name }}</span></td>\n            <td width=\"30%\" style=\"vertical-align: middle; text-align: center;\">Logistic Date: <b>{{ doc.get_formatted(\"date\") }}</b> </td>\n            <td width=\"30%\" style=\"vertical-align: middle; text-align: center;\"> Logistic Qty: <b>{{ doc.quantity }}</b></td>\n            <!--<td width=\"10%\" align=\"right\">-->\n            <!--    {% if doc.item_barcode %}<span class=\"bold\">{{ doc.item_barcode }}</span>-->\n            <!--    {% elif doc.entry_no %}<img src=\"/api/method/frappe.utils.print_format.report_to_pdf?html=%3Csvg%20class%3D%22barcode%22%20jsbarcode-format%3D%22code128%22%20jsbarcode-value%3D%22{{ doc.entry_no }}%22%20jsbarcode-height%3D%2240%22%3E%3C%2Fsvg%3E\" style=\"width:150px;height:40px;\">{% endif %}-->\n            <!--</td>-->\n        </tr>\n    </table>\n\n    <!-- 5. DOCUMENT DETAILS -->\n    <table width=\"100%\" style=\"margin-top: 1px;\">\n        <tr>\n            <td width=\"15%\">Document No.:</td><td width=\"20%\">{{ doc.document_no or \"\" }}</td>\n            <td width=\"15%\">Document Date:</td><td width=\"15%\">{{ doc.get_formatted(\"date\") }}</td>\n            <td width=\"35%\" rowspan=\"2\" style=\"text-align: right;\">\n                <div style=\"text-align: left; padding-left: 20px;\">\n                    <span style=\"font-size: 8.8pt;\">Declaration Amt.:</span>\n                    {% set total_val = [0] %}\n                    {% if doc.references %}\n                        {% for row in doc.references %}\n                            {% set val = 0 %}\n                            {% if row.source_doctype == \"Sales Invoice\" %}\n                                {% set val = frappe.db.get_value(\"Sales Invoice\", row.source_name, \"grand_total\") or 0 %}\n                            {% elif row.source_doctype == \"Purchase Receipt\" %}\n                                {% set val = frappe.db.get_value(\"Purchase Receipt\", row.source_name, \"grand_total\") or 0 %}\n                            {% elif row.source_doctype == \"Subcontracting Order\" %}\n                                {% set val = frappe.db.get_value(\"Subcontracting Order\", row.source_name, \"base_grand_total\") or 0 %}\n                            {% endif %}\n                            {% if total_val.append(total_val.pop() + val) %}{% endif %}\n                        {% endfor %}\n                    {% endif %}\n                    <span style=\"font-size: 12pt;\" class=\"bold\">{{ \"{:,.2f}\".format(total_val[0]) }}</span>\n                </div>\n            </td>\n        </tr>\n        <tr><td>Mode of Transport:</td><td>{{ doc.mode or \"Land\" }}</td><td>To Pay:</td><td>{{ doc.to_pay or \"Yes\" }}</td></tr>\n    </table>\n\n    <!-- 6. CHARGES TABLE -->\n<!-- 6. CHARGES TABLE (Fixed Alignment) -->\n    <table class=\"border-top-thick border-bottom-thick\" style=\"margin-top: 3px;\">\n        <thead>\n            <tr class=\"bold\">\n                <td style=\"text-align: center;\">Actual Weight</td>\n                <td style=\"text-align: center;\">Charged Weight</td>\n                <td style=\"text-align: center;\">Rate</td>\n                <td style=\"text-align: center;\">Freight</td>\n                <td style=\"text-align: center;\">Others</td>\n                <td style=\"text-align: center;\">Total Amount</td>\n                <td style=\"text-align: center;\">Total Inv. Qty</td>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td style=\"text-align: center;\">{{ doc.actual_weight or \"0\" }}</td>\n                <td style=\"text-align: center;\">{{ doc.charged_weight or \"0\" }}</td>\n                <td style=\"text-align: center;\">{{ doc.rate or \"0\" }}</td>\n                <td style=\"text-align: center;\">{{ doc.freight_charges or \"0\" }}</td>\n                <td style=\"text-align: center;\">{{ doc.additional_charges or \"0\" }}</td>\n                <td style=\"text-align: center;\" class=\"bold\">{{ doc.get_formatted(\"total_amount\") }}</td>\n                <td style=\"text-align: center; font-size: 13pt; vertical-align: middle;\" class=\"bold\">\n                    {{ total_tagged_qty | int }}\n                </td>\n            </tr>\n        </tbody>\n    </table>\n\n    <!-- 7. REMARKS -->\n    <table style=\"margin-top: 1px;border-bottom: 1px solid #000;\">\n        <tr><td class=\"bold\" style=\"width:105px;\">Logistics Remarks:</td><td>{{ doc.remarks or \"No Remark\" }}</td></tr>\n    </table>\n\n    <!-- 8. CHILD TABLE -->\n    <table class=\"border-bottom\" style=\"margin-top: 2px;\">\n        <thead><tr style=\"border-bottom: 1px solid #000;\"><th style=\"text-align: left; width: 40%;\">Entry No.</th><th style=\"text-align: left; width: 40%;\">Entry Date</th><th style=\"width:20%; text-align:center;\">Inv. Qty.</th></tr></thead>\n        <tbody>\n            {% if doc.references %}\n                {% for row in doc.references %}\n                    {% set r_qty = 0 %}{% set r_date = \"\" %}\n                    {% if row.source_doctype == \"Sales Invoice\" %}\n                        {% set rd = frappe.db.get_value(\"Sales Invoice\", row.source_name, [\"total_qty\", \"posting_date\"], as_dict=1) %}\n                        {% set r_qty = rd.total_qty %}{% set r_date = rd.posting_date %}\n                    {% elif row.source_doctype == \"Purchase Receipt\" %}\n                        {% set rd = frappe.db.get_value(\"Purchase Receipt\", row.source_name, [\"total_qty\", \"posting_date\"], as_dict=1) %}\n                        {% set r_qty = rd.total_qty %}{% set r_date = rd.posting_date %}\n                    {% elif row.source_doctype == \"Subcontracting Order\" %}\n                        {% set rd = frappe.db.get_value(\"Subcontracting Order\", row.source_name, [\"total_qty\", \"transaction_date\"], as_dict=1) %}\n                        {% set r_qty = rd.total_qty %}{% set r_date = rd.transaction_date %}\n                    {% endif %}\n                <tr><td style=\"font-size: 18px;\">{{ row.source_name }}</td><td>{{ r_date }}</td><td class=\"bold\" style=\"text-align:center;\">{{ r_qty | int }}</td></tr>\n                {% endfor %}\n            {% endif %}\n        </tbody>\n    </table>\n\n    <!-- 9. FOOTER -->\n    <table style=\"margin-top: 50px;\">\n        <tr><td align=\"center\"><div style=\"border-bottom:1px solid #000; width:70%; margin:auto;\"></div></td><td align=\"center\"><div style=\"border-bottom:1px solid #000; width:70%; margin:auto;\"></div></td><td align=\"center\"><div style=\"border-bottom:1px solid #000; width:70%; margin:auto;\"></div></td></tr>\n        <tr><td align=\"center\">Created By</td><td align=\"center\">Checked By</td><td align=\"center\">Passed By</td></tr>\n    </table>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-02-25 13:54:31.761740",
 "modified_by": "Administrator",
 "module": "Franchise Erp",
 "name": "Outgoing Logistics PF",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}