{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2026-01-17 17:43:00.716887",
 "css": "/* Header Section Fix */\n/*.print-header {*/\n/*    border-bottom: 2px solid #000;*/\n/*    padding-bottom: 8px;*/\n/*    margin-bottom: 15px;*/\n/*}*/\n.print-header {\n    /* border-bottom ko hata diya taaki double line na dikhe */\n    padding-bottom: 8px;\n    margin-bottom: 0px; \n}\n\n/* Naya Central Title Styling */\n.central-job-title {\n    text-align: center;\n    font-weight: bold;\n    font-size: 14px;\n    text-transform: uppercase;\n    /*border-top: 1.5px solid #000;*/\n    /*border-bottom: 1.5px solid #000;*/\n    padding: 5px 0; /* Isse text upar niche nahi chipkega (Vertical Gap) */\n    margin-bottom: 15px; /* Neeche wale table se doori */\n    letter-spacing: 1px;\n}\n\n.company-name {\n    font-weight: bold;\n    font-size: 16px;\n    text-transform: uppercase;\n    margin-top: 5px;\n}\n\n.title-box {\n    text-align: right;\n    font-weight: bold;\n    vertical-align: bottom !important; \n}\n\n/* Jobber Name Section - Only Top & Bottom borders */\n.info-table {\n    width: 100%;\n    border-collapse: collapse;\n    margin-bottom: 15px;\n}\n\n.info-table td {\n    border-top: 1.5px solid #000;\n    border-bottom: 1.5px solid #000;\n    border-left: none;\n    border-right: none;\n    padding: 6px 8px;\n    font-size: 11px;\n    vertical-align: top;\n}\n\n/* Beech ki vertical separator line */\n.info-table td:first-child {\n    border-right: 1.5px solid #000;\n}\n\n/* Main Tables (Assembly/Components) - No Side Borders */\n.data-table {\n    width: 100%;\n    border-collapse: collapse;\n    border: none !important;\n}\n\n/* Table Header Lines */\n.data-table thead tr th {\n    border-top: 1.5px solid #000 !important;\n    border-bottom: 1.5px solid #000 !important;\n    border-left: none !important;\n    border-right: none !important;\n    padding: 8px 4px;\n    font-size: 10px;\n    text-align: center;\n}\n\n/* Table Rows - Clean look */\n.data-table tbody tr td {\n    border: none !important;\n    padding: 6px 4px;\n    font-size: 10px;\n    vertical-align: top;\n}\n\n/* TOTAL ROW - Sirf Top & Bottom Borders */\n.total-row td {\n    border-top: 1.5px solid #000 !important;\n    border-bottom: 1.5px solid #000 !important;\n    border-left: none !important;\n    border-right: none !important;\n    font-weight: bold !important;\n    padding: 4px 4px !important;\n}\n\n/* Footer Section */\n.footer-section {\n    margin-top: 40px;\n}\n\n.sig-box {\n    border-top: 1.5px solid #000;\n    text-align: center;\n    width: 30%;\n    display: inline-block;\n    margin-right: 3%;\n    padding-top: 5px;\n    font-size: 11px;\n    font-weight: bold;\n} /* <-- Ye bracket miss ho gaya tha */\n\n/* LOGO FIX: ERPNext ki default width:100% ko override karne ke liye */\n.print-format td img {\n    width: auto !important;\n    max-width: 100%;\n}\n\nbody:last-child .print-format td img {\n    width: auto !important;\n}\n\n\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Subcontracting Order",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<!-- Header Section (Dynamic Address Logic) -->\n{% set company_doc = frappe.get_doc(\"Company\", doc.company) %}\n\n{# Address Hierarchy Logic: 1. Billing -> 2. Shipping -> 3. Company Master #}\n{% set addr_name = doc.billing_address or doc.shipping_address or frappe.db.get_value(\"Dynamic Link\", {\"link_doctype\": \"Company\", \"link_name\": doc.company, \"parenttype\": \"Address\"}, \"parent\") %}\n{% set addr = frappe.get_doc(\"Address\", addr_name) if addr_name else None %}\n\n<div class=\"print-header\">\n    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"table-layout: fixed;\">\n        <tr>\n            <!-- LEFT SIDE (Company Details) -->\n            <td width=\"60%\" style=\"vertical-align: top; padding-right: 10px;\">\n\n                <img src=\"{{ company_doc.logo_for_printing or company_doc.company_logo }}\"\n                     style=\"max-height: 65px; width: auto; display: block; margin-bottom: 6px;\">\n\n                <div style=\"font-weight: bold; font-size: 14px; text-transform: uppercase;\">\n                    {{ company_doc.company_name }}\n                </div>\n\n                {% if addr %}\n                <div style=\"font-size: 12px; line-height: 1.3;\">\n                    {{ addr.address_line1 or '' }}{% if addr.address_line2 %}, {{ addr.address_line2 }}{% endif %}<br>\n                    {{ addr.city or '' }}{% if addr.state %}, {{ addr.state }}{% endif %}\n                    {% if addr.pincode %} - {{ addr.pincode }}{% endif %}\n                </div>\n\n                <div style=\"font-size: 11px; margin-top: 4px;\">\n                    <b>GSTIN :</b> {{ company_doc.gstin }} [{{ doc.place_of_supply or '' }}]\n                </div>\n                {% else %}\n                <!-- Fallback agar koi address link nahi hai -->\n                <div style=\"font-size: 11px; margin-top: 4px;\">\n                    <b>GSTIN :</b> {{ company_doc.gstin }}\n                </div>\n                {% endif %}\n\n            </td>\n\n            <!-- RIGHT SIDE (Order Info) -->\n            <td width=\"40%\" style=\"vertical-align: top; text-align: right;\">\n                <div style=\"font-size: 18px; font-weight: bold; margin-bottom: 10px;\">\n                    JOB ORDER\n                </div>\n\n                <table style=\"width: auto; margin-left: auto; border: none !important; border-collapse: collapse; font-size: 12px; line-height: 1.6;\">\n                    <tr>\n                        <td style=\"text-align: right; border: none !important; padding: 0; white-space: nowrap;\"><b>Order No.</b></td>\n                        <td style=\"padding: 0 5px; text-align: center; border: none !important; width: 10px;\">:</td>\n                        <td style=\"text-align: left; border: none !important; white-space: nowrap;\"><b>{{ doc.name }}</b></td>\n                    </tr>\n                    <tr>\n                        <td style=\"text-align: right; border: none !important; padding: 0; white-space: nowrap;\"><b>Date</b></td>\n                        <td style=\"padding: 0 5px; text-align: center; border: none !important;\">:</td>\n                        <td style=\"text-align: left; border: none !important; white-space: nowrap;\"><b>{{ doc.get_formatted(\"transaction_date\") }}</b></td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</div>\n\n<!-- Jobber & Ref Details (Fixed Alignment) -->\n<table class=\"info-table\" style=\"width: 100%; border-collapse: collapse; \">\n    <tr>\n        <!-- Left Side: Jobber Details -->\n        <td width=\"55%\" style=\"vertical-align: top; padding: 5px;\">\n            {% set supplier_addr_id = frappe.db.get_value(\"Dynamic Link\", {\"link_doctype\": \"Supplier\", \"link_name\": doc.supplier, \"parenttype\": \"Address\"}, \"parent\") %}\n            {% if supplier_addr_id %}{% set s_addr = frappe.get_doc(\"Address\", supplier_addr_id) %}{% endif %}\n\n            <table style=\"width: 100%; border: none !important; border-collapse: collapse; font-size: 11px;\">\n                <tr>\n                    <td style=\"width: 100px; white-space: nowrap; border: none !important;\"><b>Jobber Name</b></td>\n                    <td style=\"width: 10px; text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\"><b>{{ doc.supplier_name }}</b></td>\n                </tr>\n                <tr>\n                    <td style=\"white-space: nowrap; border: none !important;\"><b>Address</b></td>\n                    <td style=\"text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">\n                        {% if s_addr %}{{ s_addr.address_line1 or '' }}{{ \", \" + s_addr.city if s_addr.city else \"\" }}{% else %}{{ doc.supplier_address or '' }}{% endif %}\n                    </td>\n                </tr>\n                <tr>\n                    <td style=\"white-space: nowrap; border: none !important;\"><b>Phone No</b></td>\n                    <td style=\"text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">{{ s_addr.phone if s_addr else '' }}</td>\n                </tr>\n                <tr>\n                    <td style=\"white-space: nowrap; border: none !important;\"><b>Party GSTIN</b></td>\n                    <td style=\"text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">{{ s_addr.gstin if (s_addr and s_addr.gstin) else (frappe.db.get_value(\"Supplier\", doc.supplier, \"gstin\") or '') }}</td>\n                </tr>\n                <tr>\n                    <td style=\"white-space: nowrap; border: none !important;\"><b>Party GST State</b></td>\n                    <td style=\"text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">\n                        {% if s_addr and s_addr.gstin %}\n                            {{ s_addr.gstin[:2] }} - {{ s_addr.state }}\n                        {% else %}\n                            <!--{{ doc.place_of_supply or '' }}-->\n                        {% endif %}\n                    </td>\n                </tr>\n            </table>\n        </td>\n\n        <!-- Right Side: Ref Details -->\n        <td width=\"45%\" style=\"vertical-align: top; padding: 5px;\">\n            <table style=\"width: 100%; border: none !important; border-collapse: collapse; font-size: 11px;\">\n                <tr>\n                    <td style=\"width: 80px; white-space: nowrap; border: none !important;\"><b>Ref No</b></td>\n                    <td style=\"width: 10px; text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">{{ doc.purchase_order or '' }}</td>\n                </tr>\n                <tr>\n                    <td style=\"white-space: nowrap; border: none !important;\"><b>Ref Date</b></td>\n                    <td style=\"text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">{{ doc.get_formatted(\"transaction_date\") }}</td>\n                </tr>\n                <!--<tr>-->\n                <!--    <td style=\"white-space: nowrap; border: none !important;\"><b>Job Type</b></td>-->\n                <!--    <td style=\"text-align: center; border: none !important;\">:</td>-->\n                <!--    <td style=\"border: none !important;\">-</td>-->\n                <!--</tr>-->\n                <tr>\n                    <td style=\"white-space: nowrap; border: none !important;\"><b>Process</b></td>\n                    <td style=\"text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">-</td>\n                </tr>\n                \n                <!--<tr>-->\n                <!--    <td style=\"white-space: nowrap; border: none !important; padding: 2px 0;\"><b>Process</b></td>-->\n                <!--    <td style=\"text-align: center; border: none !important; padding: 2px 0;\">:</td>-->\n                <!--    <td style=\"border: none !important; padding: 2px 5px;\">-->\n                <!--        {# BOM se operations fetch karne ka logic #}-->\n                <!--        {% set unique_processes = [] %}-->\n                <!--        {% for item in doc.items %}-->\n                <!--            {% if item.bom %}-->\n                <!--                {% set bom_doc = frappe.get_doc(\"BOM\", item.bom) %}-->\n                <!--                {% for op in bom_doc.operations %}-->\n                <!--                    {# Agar operation ka naam list mein nahi hai toh add karo #}-->\n                <!--                    {% if op.operation and op.operation not in unique_processes %}-->\n                <!--                        {% set _ = unique_processes.append(op.operation) %}-->\n                <!--                    {% endif %}-->\n                <!--                {% endfor %}-->\n                <!--            {% endif %}-->\n                <!--        {% endfor %}-->\n                \n                <!--        {# Saare unique processes ko join karke print karna #}-->\n                <!--        {{ unique_processes | join(', ') or '-' }}-->\n                <!--    </td>-->\n                <!--</tr>-->\n                <tr>\n                    <td style=\"white-space: nowrap; border: none !important;\"><b>Remarks</b></td>\n                    <td style=\"text-align: center; border: none !important;\">:</td>\n                    <td style=\"border: none !important;\">{{ doc.remarks or '-' }}</td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n</table>\n\n<!-- Assembly Items Table -->\n<!-- Assembly Items Table (Mapped to service_cost_per_qty) -->\n<table class=\"data-table\" style=\"width: 100%; border-collapse: collapse; border: 1px solid black; font-size: 11px;\">\n    <thead>\n        <tr style=\"background-color: #f2f2f2;\">\n            <th width=\"10%\">Type</th>\n            <th width=\"25%\">Group/Item</th>\n            <th width=\"10%\">HSN Code</th>\n            <th width=\"15%\">Plan No</th>\n            <th width=\"12%\">Due Date</th>\n            <th width=\"10%\">Rate</th>\n            <th width=\"6%\">Qty.</th>\n            <th width=\"4%\">UOM</th>\n            <th width=\"8%\">Amount</th>\n        </tr>\n    </thead>\n    <tbody>\n        {# Total calculate karne ke liye variable set kiya #}\n        {% set ns = namespace(total_amt=0) %}\n        \n        {% for item in doc.items %}\n            {# Rate mapping from service_cost_per_qty #}\n            {% set row_rate = item.service_cost_per_qty or 0 %}\n            \n            {# Amount calculation: Rate * Qty #}\n            {% set row_amount = row_rate * item.qty %}\n            \n            {# Running Total update #}\n            {% set ns.total_amt = ns.total_amt + row_amount %}\n            \n            <tr style=\"border-bottom: 1px solid #eee;\">\n                <td align=\"center\" style=\"white-space: nowrap;\">Assembly Items</td>\n                <td align=\"center\" style=\"padding: 5px;\">\n                    <b>{{ item.item_code }}</b><br>\n                    {% set style_no = frappe.db.get_value(\"Item\", item.item_code, \"custom_barcode_code\") %}\n                    <small>({{ style_no if style_no else '' }})</small>\n                </td>\n                <td align=\"center\">{{ item.gst_hsn_code or item.hsn_code or '' }}</td>\n                <td align=\"center\" style=\"white-space: nowrap;\">{{ item.bom or '' }}</td>\n                <td align=\"center\">{{ item.get_formatted(\"schedule_date\") }}</td>\n                \n                <!-- Displaying service_cost_per_qty as Rate -->\n                <td align=\"right\">{{ frappe.format(row_rate, \"Currency\") }}</td>\n                \n                <td align=\"center\"><b>{{ item.qty }}</b></td>\n                \n                {# UOM logic: service_items table se matching UOM fetch karna #}\n                {% set s_item = (doc.service_items | selectattr(\"fg_item\", \"equalto\", item.item_code) | list | first) %}\n                <td align=\"center\">{{ s_item.uom or item.stock_uom or '' }}</td>\n                \n                <!-- Calculated Amount (Rate * Qty) -->\n                <td align=\"right\">\n                    {{ frappe.format(row_amount, \"Currency\") }}\n                </td>\n            </tr>\n        {% endfor %}\n        \n        <tr class=\"total-row\" style=\"background-color: #eeeeee !important; border-top: 1px solid black; border-bottom: 1px solid black; font-weight: bold;\">\n            <td colspan=\"5\" align=\"right\">Assembly Item Total</td>\n            <td align=\"right\"></td>\n            <td align=\"center\">{{ doc.total_qty }}</td>\n            <td colspan=\"2\" align=\"right\">\n                {# Correct calculated total based on service_cost_per_qty #}\n                {{ frappe.format(ns.total_amt, \"Currency\") }}\n            </td>\n        </tr>\n    </tbody>\n</table>\n\n<!-- Component Items Table (Exact Mapping Fix) -->\n<table class=\"data-table\" style=\"width: 100%; table-layout: fixed; border-collapse: collapse; border: 1px solid black; margin-top:15px; font-size: 10px;\">    \n    <thead>\n        <tr style=\"background-color: #f2f2f2; border-bottom: 1px solid black;\">           \n            <th width=\"12%\" style=\"white-space: nowrap;\">Type</th>\n            <!--<th width=\"15%\" style=\"white-space: nowrap;\">Item Group</th>-->\n            <th width=\"20%\" style=\"white-space: nowrap;\">Design No</th>\n            <th width=\"13%\" style=\"white-space: nowrap;\">Top Fabric</th>\n            <th width=\"29%\" style=\"text-align: center;\">Group/Item</th>\n            <th width=\"13%\">Qty.</th>\n            <th width=\"13%\">UOM</th>\n        </tr>\n    </thead>\n    <tbody>\n        {% set comp_summary = {} %}\n        {% for s_item in doc.supplied_items %}\n            {% if s_item.rm_item_code in comp_summary %}\n                {% set _ = comp_summary[s_item.rm_item_code].update({'qty': comp_summary[s_item.rm_item_code].qty + s_item.required_qty}) %}\n            {% else %}\n                {# Item Master se Exact Fields Fetch karna #}\n                {% set item_info = frappe.db.get_value(\"Item\", s_item.rm_item_code, [\"item_group\", \"custom_sup_design_no\", \"custom_top_fabrics\"], as_dict=1) %}\n                \n                {% set _ = comp_summary.update({\n                    s_item.rm_item_code: {\n                        'name': s_item.item_name,\n                        'qty': s_item.required_qty,\n                        'uom': s_item.stock_uom or '',\n                        'item_group': item_info.item_group if item_info else '-',\n                        'design_no': item_info.custom_sup_design_no if (item_info and item_info.custom_sup_design_no) else '-',\n                        'fabric': item_info.custom_top_fabrics if (item_info and item_info.custom_top_fabrics) else '-'\n                    }\n                }) %}\n            {% endif %}\n        {% endfor %}\n\n        {# Item Group ke hisab se sort karna #}\n        {% for code, details in comp_summary.items() | sort(attribute='1.item_group') %}\n        <tr style=\"border-bottom: 1px solid #eee;\">\n            <td align=\"center\" style=\"vertical-align: middle; white-space: nowrap; padding: 5px;\"><b>Component Items</b></td>\n            \n            <!-- Item Group Value (From Item Master) -->\n            <!--<td align=\"center\" style=\"vertical-align: middle; white-space: nowrap;\">{{ details.item_group }}</td>-->\n            \n            <!-- Design No Mapping (custom_sup_design_no) -->\n            <td align=\"center\" style=\"vertical-align: middle; white-space: nowrap;\">{{ details.design_no }}</td>\n            \n            <!-- Top Fabric Mapping (custom_top_fabrics) -->\n            <td align=\"center\" style=\"vertical-align: middle; white-space: nowrap;\">{{ details.fabric }}</td>\n            \n            <td align=\"center\" style=\"vertical-align: middle; padding: 5px;\">\n                <b>{{ code }}</b><br>\n                <small>{{ details.name or '' }}</small>\n            </td>\n            \n            <td align=\"center\" style=\"vertical-align: middle;\"><b>{{ \"{:,.2f}\".format(details.qty) }}</b></td>\n            <td align=\"center\" style=\"vertical-align: middle;\">{{ details.uom }}</td>\n        </tr>\n        {% endfor %}\n        \n        <tr class=\"total-row\" style=\"background-color: #eeeeee !important; border-top: 1px solid black; border-bottom: 1px solid black; font-weight: bold;\">\n            <td colspan=\"5\" align=\"right\" style=\"padding: 8px;\">Component Item Total</td>\n            <td align=\"center\" style=\"vertical-align: middle;\">{{ \"{:,.3f}\".format(doc.supplied_items | sum(attribute='required_qty')) }}</td>\n            <td></td>\n        </tr>\n    </tbody>\n</table>\n<!-- Footer Section -->\n<div class=\"footer-section\" style=\"margin-top: 10px;\">\n\n    <div style=\"text-align: right; font-weight: bold; margin-right: 39px; \">\n        For {{ doc.company }}\n    </div>\n\n    <!-- Company Sign -->\n    <div style=\"text-align: right; height: 80px; \">\n        {% set sign_logo = frappe.db.get_value(\"Company\", doc.company, \"custom_sign_logo\") %}\n        \n        {% if sign_logo %}\n            <img src=\"{{ sign_logo }}\"\n                 style=\"max-height: 80px; width: auto; margin-right: 39px;\">\n        {% endif %}\n    </div>\n\n    <div class=\"sig-box\">Prepared By</div>\n    <div class=\"sig-box\">Checked By</div>\n    <div class=\"sig-box\" style=\"margin-right:0;\">Authorized Signatory</div>\n\n</div>\n\n<!-- Bottom Page Bar (Fixed Page 1, Page 2 Format) -->\n<div style=\"position: fixed; bottom: 0; left: 0; right: 0; font-size: 10px; padding: 5px 10px; border-top: 1px solid #ccc; background-color: white;\">\n    <div style=\"display: flex; justify-content: space-between; width: 100%;\">\n        \n        <!-- Sirf Date dikhayega, Time nahi -->\n        <div>\n            Print Date: {{ frappe.utils.formatdate(frappe.utils.nowdate(), \"dd-mm-yyyy\") }}\n        </div>\n\n        <!-- Sirf Page Number dikhayega (e.g. Page 1) -->\n        <div>\n            Page {{ page_number or 1 }}\n        </div>\n\n    </div>\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-02-28 17:29:12.709548",
 "modified_by": "Administrator",
 "module": "Franchise Erp",
 "name": "subcontracting_order_PrintFormat",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}